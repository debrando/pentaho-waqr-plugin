<?xml version="1.0" encoding="UTF-8"?>
<plugin title="Pentaho Adhoc Reporting" name="waqr">

    <menu-items>
        <menu-item id="adhocrep" anchor="file-new-submenu" label="Report..." command="api/repos/xwaqr/editor" type="MENU_ITEM" how="LAST_CHILD"/>
    </menu-items>

    <overlays>
	    <overlay id="launch" resourcebundle="system/waqr/resources/messages/messages.properties">
 			<button 
				id="launch_new_report" 
				label="${Launcher.NEW_REPORT}" 
				image="api/repos/xwaqr/resources/images/btn_ql_newreport.png"
				command="openURL('${Launcher.NEW_REPORT_TITLE}', '${Launcher.NEW_REPORT_TOOLTIP}', 'api/repos/xwaqr/editor')"/>
	    </overlay>


    	    <overlay id="startup.dashboardToolbar" resourcebundle="system/waqr/resources/messages/messages.properties">

    	    	<overlay id="startup.dashboardToolbar" resourcebundle="system/waqr/resources/messages/messages.properties">
    	    		<toolbar id="mainToolbar">
    	    			<toolbarspacer id="spacer" width="20" insertafter="openButton"/>
	    			<toolbarbutton id="newAdhocButton" image="../api/repos/xwaqr/resources/images/new_report_32.png" onclick="mainToolbarHandler.openUrl('New Report', 'New Report', 'api/repos/xwaqr/editor')" tooltiptext="New Report" insertafter="spacer"/>
	    		</toolbar>
	        </overlay>    
	    </overlay>    	    

    </overlays>  
   <static-paths>
     <static-path url="/waqr/resources" localFolder="resources"/>
   </static-paths>

	<content-types>
		<content-type type="xwaqr" mime-type="text/html">
        	<title>Ad-Hoc report</title>
        	<description></description>
	        <icon-url>api/repos/xwaqr/resources/images/adhoc-icon-small.png</icon-url>
            <meta-provider>org.pentaho.platform.engine.services.solution.ActionSequenceFileInfo</meta-provider>
	        <operations>
    		    	<operation>
    				<id>RUN</id>
       			</operation>
	    	    	<operation>
	       			<id>NEWWINDOW</id>
	       		</operation>        		
	        	<operation>
    	    		<id>EDIT</id>
            		<perspective>editor</perspective>
        		</operation>
	        </operations>
    	</content-type>

	</content-types>
	<content-generator id="xwaqr.editor" type="xwaqr.editor" class="org.pentaho.platform.plugin.adhoc.AdhocEditorContentGenerator"/>
</plugin>